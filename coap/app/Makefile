APPLICATION ?= app
RIOTBASE ?= $(CURDIR)/../RIOT

BOARD ?= native
DEVELHELP ?= 1

USEMODULE += gnrc_netdev_default
USEMODULE += auto_init_gnrc_netif
USEMODULE += gnrc_ipv6_router_default
USEMODULE += gnrc_icmpv6_echo
USEMODULE += gcoap
USEMODULE += od

USEMODULE += shell
USEMODULE += shell_commands
USEMODULE += ps

BOARD ?= native

DEFAULT_CHANNEL=15

CFLAGS += -DGCOAP_STACK_SIZE="THREAD_STACKSIZE_DEFAULT + DEBUG_EXTRA_STACKSIZE + sizeof(coap_pkt_t) + 1500"
CFLAGS += -DTHREAD_STACKSIZE_MAIN="THREAD_STACKSIZE_DEFAULT + THREAD_EXTRA_STACKSIZE_PRINTF + 1500"

CFLAGS += -DGCOAP_PDU_BUF_SIZE=600
CFLAGS += -DGNRC_IPV6_NIB_NUMOF=16
CFLAGS += -DGNRC_IPV6_NIB_OFFL_NUMOF=16
CFLAGS += -DGCOAP_REQ_WAITING_MAX=32
CFLAGS += -DGCOAP_RESEND_BUFS_MAX=32
CFLAGS += -DSOCK_MBOX_SIZE=32
CFLAGS += -DSOCK_DTLS_MBOX_SIZE=32
CFLAGS += -DCOAP_ACK_VARIANCE=0
CFLAGS += -DGCOAP_NO_RETRANS_BACKOFF=1
CFLAGS += -DGNRC_IPV6_NIB_CONF_NO_RTR_SOL=1

CFLAGS += -DCHACHAPOLY=0
CFLAGS += -DAESCCM=1
CFLAGS += -DEXP_L2_PRINT=0
CFLAGS += -DEXP_MULTI=0

USEMODULE += random
#USEPKG += cifra
#USEPKG += monocypher
USEPKG += tinydtls

# C11 features are accepted in the OSCORE implementation, but that causes
# pedantic Werrors to show up in RIOT source; gnu11 seems to ignore those.
CFLAGS += -std=gnu11

include $(RIOTBASE)/Makefile.include
include $(RIOTMAKE)/default-radio-settings.inc.mk
